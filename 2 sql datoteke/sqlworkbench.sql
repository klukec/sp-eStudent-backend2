-- MySQL Script generated by MySQL Workbench
-- 12/14/15 11:32:27
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema estudent
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema estudent
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `estudent` DEFAULT CHARACTER SET utf8 ;
USE `estudent` ;

-- -----------------------------------------------------
-- Table `estudent`.`Vloga`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `estudent`.`Vloga` (
  `idVloga` INT NOT NULL AUTO_INCREMENT,
  `nazivVloge` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idVloga`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `estudent`.`Uporabnik`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `estudent`.`Uporabnik` (
  `idUporabnik` INT NOT NULL AUTO_INCREMENT,
  `vpisnaStevilka` INT NULL,
  `ime` VARCHAR(45) NOT NULL,
  `priimek` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `geslo` VARCHAR(45) NOT NULL,
  `mobi` VARCHAR(45) NOT NULL,
  `spol` CHAR(1) NOT NULL,
  `letnikStudija` INT NULL,
  `datumRegistracije` DATETIME NOT NULL,
  `zadnjiDostop` DATETIME NOT NULL,
  `idVloge` INT NOT NULL,
  PRIMARY KEY (`idUporabnik`),
  UNIQUE INDEX `idUporabnik_UNIQUE` (`idUporabnik` ASC),
  UNIQUE INDEX `vpisnaStevilka_UNIQUE` (`vpisnaStevilka` ASC),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC),
  INDEX `fk_Uporabnik_Vloga1_idx` (`idVloge` ASC),
  CONSTRAINT `fk_Uporabnik_Vloga1`
    FOREIGN KEY (`idVloge`)
    REFERENCES `estudent`.`Vloga` (`idVloga`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `estudent`.`Predmet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `estudent`.`Predmet` (
  `idPredmet` INT NOT NULL AUTO_INCREMENT,
  `imePredmeta` VARCHAR(45) NOT NULL,
  `idIzvajalca` INT NOT NULL,
  `stKreditnih` INT NOT NULL,
  PRIMARY KEY (`idPredmet`),
  INDEX `fk_Predmet_Uporabnik_idx` (`idIzvajalca` ASC),
  CONSTRAINT `idIzvajalca`
    FOREIGN KEY (`idIzvajalca`)
    REFERENCES `estudent`.`Uporabnik` (`idUporabnik`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `estudent`.`IzpitniRok`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `estudent`.`IzpitniRok` (
  `idIzpitniRok` INT NOT NULL AUTO_INCREMENT,
  `idPredmeta` INT NOT NULL,
  `stRoka` INT NOT NULL,
  `datum` DATE NOT NULL,
  `prostor` VARCHAR(45) NOT NULL,
  `komentar` VARCHAR(256) NOT NULL,
  `zakljucen` TINYINT(1) NULL,
  PRIMARY KEY (`idIzpitniRok`),
  INDEX `fk_IzpitniRok_Predmet1_idx` (`idPredmeta` ASC),
  CONSTRAINT `fk_IzpitniRok_Predmet1`
    FOREIGN KEY (`idPredmeta`)
    REFERENCES `estudent`.`Predmet` (`idPredmet`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `estudent`.`Ocena`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `estudent`.`Ocena` (
  `idOcena` INT NOT NULL AUTO_INCREMENT,
  `idStudenta` INT NOT NULL,
  `idPredmeta` INT NOT NULL,
  `idIzpitnegaRoka` INT NOT NULL,
  `sTock` INT NOT NULL,
  `ocena` INT NOT NULL,
  PRIMARY KEY (`idOcena`),
  INDEX `fk_Ocena_Uporabnik1_idx` (`idStudenta` ASC),
  INDEX `fk_Ocena_Predmet1_idx` (`idPredmeta` ASC),
  INDEX `fk_Ocena_IzpitniRok1_idx` (`idIzpitnegaRoka` ASC),
  CONSTRAINT `fk_Ocena_Uporabnik1`
    FOREIGN KEY (`idStudenta`)
    REFERENCES `estudent`.`Uporabnik` (`idUporabnik`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ocena_Predmet1`
    FOREIGN KEY (`idPredmeta`)
    REFERENCES `estudent`.`Predmet` (`idPredmet`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Ocena_IzpitniRok1`
    FOREIGN KEY (`idIzpitnegaRoka`)
    REFERENCES `estudent`.`IzpitniRok` (`idIzpitniRok`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `estudent`.`StudentPredmet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `estudent`.`StudentPredmet` (
  `idStudentPredmet` INT NOT NULL AUTO_INCREMENT,
  `idStudenta` INT NOT NULL,
  `idPredmeta` INT NOT NULL,
  `opravljen` TINYINT(1) NULL,
  PRIMARY KEY (`idStudentPredmet`),
  INDEX `fk_StudentPredmet_Uporabnik1_idx` (`idStudenta` ASC),
  INDEX `fk_StudentPredmet_Predmet1_idx` (`idPredmeta` ASC),
  CONSTRAINT `fk_StudentPredmet_Uporabnik1`
    FOREIGN KEY (`idStudenta`)
    REFERENCES `estudent`.`Uporabnik` (`idUporabnik`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_StudentPredmet_Predmet1`
    FOREIGN KEY (`idPredmeta`)
    REFERENCES `estudent`.`Predmet` (`idPredmet`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
